GujAd.Util=GujAd.Util?GujAd.Util:{},GujAd.Util.insertCountingPixel=function(a,b){if(b.length>0)if(b=b.replace(new RegExp('"',"g"),"").trim(),b.indexOf("<")>=0&&b.indexOf(">")>0)GujAd.Util.createFriendlyIframe(a.id,b,0,0);else{var c=document.createElement("img");c.src=b,c.width="1",c.height="1",a.appendChild(c)}},EmsAd.creative=EmsAd.creative||{},EmsAd.loadPromotionAd=function(a){if(void 0!==a.adCode){var b=void 0!==GujAd.Privacy.getCurrentTCFString?GujAd.Privacy.getCurrentTCFString():"",c=GujAd.Util.parseXMLFromString(a.adCode.replace(/%%TC_STRING%%/gi,b).trim());for(var d in c.adContent)c.adContent.hasOwnProperty(d)&&void 0!==c.adContent[d]["#cdata-section"]&&(a[d]=a[d]||c.adContent[d]["#cdata-section"].value);for(d in c.adContent["@attributes"])a[d]=a[d]||c.adContent["@attributes"][d]}if(a.redirect){var e=function(a){var b=["Ã¤","Ã„","Ã¶","Ã–","Ã¼","Ãœ","ÃŸ"],c=["ä","Ä","ö","Ö","ü","Ü","ß"];for(i=0;i<b.length;i++)a=a.replace(RegExp(b[i],"g"),c[i]);return a};a.width="undefined"==typeof emsPromoWidth?a.width:emsPromoWidth,a.height="undefined"==typeof emsPromoHeight?a.height:emsPromoHeight,a.imgPath="undefined"==typeof emsPromoImageSrc?a.imgPath:emsPromoImageSrc,"undefined"==typeof emsPromoLinkTitel?a.linktitel=a.linktitel:a.linktitel=GujAd.Util.createElement("div",{innerHTML:e(emsPromoLinkTitel)}).innerText,a.beschreibung="undefined"==typeof emsPromoBeschreibung?a.beschreibung:e(emsPromoBeschreibung),a.footer="undefined"==typeof emsPromoFooter?a.footer:e(emsPromoFooter),a.clickUrl="undefined"==typeof emsPromoZielUrl?a.clickUrl:"%%CLICK_URL_UNESC%%"+emsPromoZielUrl}if("undefined"!=typeof inDapIF){a.fifId=window.frameElement.id.replace("///g","\\/");var f=parent.document.getElementById(a.fifId);f.style.display="none",f.style.visibility="hidden"}var g=GujAd.Util.createElement("div",{id:"emsTBContainer"+a.idEnding,className:"emsTBContainer",style:"width: 100%; position: relative; margin: auto;"});null!==document.getElementById(a.adPositionName)&&document.getElementById(a.adPositionName).appendChild(g),setTimeout(function(){EmsAd.getPromotionAdParams(a)},0)},EmsAd.getPromotionAdParams=function(a){if("Xandr Tag"===a.type)a=EmsGuj.AppNexusGetAd(a.adPositionName,"nat",a),EmsAd.renderPromotionAd(a);else if("YL Tag"===a.type){var b=a.YieldlabRedirect;try{var c=GujAd.Privacy.getCurrentTCFString();b=b.replace("%%TC_STRING%%",c)}catch(a){}var d=window.XDomainRequest?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.open("GET",b,!0),d.withCredentials=!0,d.send(),function(a,b){a.onreadystatechange=function(){if(200==a.status&&4==a.readyState&&a.responseText.length>=1){try{var c=JSON.parse(a.responseText);if(void 0!==c.native){void 0!==c.native.link&&(b.clickUrl=b.clickPrefix+c.native.link.url);var d,e=c.native.assets||[];for(d=0;d<e.length;d++)void 0!==e[d].data?b.beschreibung=e[d].data.value:void 0!==e[d].title?b.linktitel=e[d].title.text:void 0!==e[d].img?b.imgPath=e[d].img.url:void 0!==e[d].footer&&(b.footer=e[d].footer.text);var f=c.native.imptrackers||[];for(d=0;d<f.length&&d<4;d++)GujAd.Util.insertCountingPixel(document.body,f[d].replace(new RegExp("'","g"),""))}}catch(a){}EmsAd.renderPromotionAd(b)}}}(d,a)}else EmsAd.renderPromotionAd(a)},EmsAd.renderPromotionAd=function(a){var b=a;if("undefined"==typeof inDapIF||null!==parent.document.getElementById("emsTBContainer"+b.idEnding)){var c="",d="",e="emsTBAnzeige"+b.idEnding,f=b.height,g="display:block;",h=GujAd.getClient().isMobile(),i=void 0!==b.beschreibung&&b.beschreibung.length>60?1:0,j=void 0!==b.linktitel&&b.linktitel.length>30?1:0,k=void 0!==b.footer&&b.footer.length>40?1:0;void 0!==b.beschreibung&&b.beschreibung.length>80&&i++;var l=document.querySelector("#"+b.adPositionName+" div[id*=google]");null!==l&&(l.style.display="none");var m=GujAd.Util.createElement("div",{id:"gujCountingPixel_"+Math.floor(99999999999*Math.random()),style:"position:absolute"});document.querySelector("#emsTBContainer"+b.idEnding).appendChild(m);var n={amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};for(var o in n){var p=new RegExp("&"+o+";","g");b.impTrackerTop=b.impTrackerTop.replace(p,n[o]),b.impTrackerBottom=b.impTrackerBottom.replace(p,n[o])}b.impTrackerTop=b.impTrackerTop.trim(),b.impTrackerBottom=b.impTrackerBottom.trim();var q=function(a){if(a.length>0)if(a.indexOf("<")>=0&&a.indexOf(">")>0)GujAd.Util.createFriendlyIframe(m.id,a,0,0,m.ownerDocument);else{a=a.replace(new RegExp('"',"g"),"").trim(),a=a.replace(new RegExp("'","g"),"").trim();var b=document.createElement("img");b.src=a,b.width="1",b.height="1",m.appendChild(b)}};if(q(b.impTrackerTop),void 0!==b.impTrackerArray)for(var r=0;r<b.impTrackerArray.length&&r<4;r++)q(b.impTrackerArray[r]);if(h)c="-w-",_adWidth=b.width>0?b.width:320,f=b.height>0?b.height:"1"===b.adPosition?150:250,e="mTB";else{var s="";c="Anzeige",b.slotWidth=300;try{b.adPosObj=parent.document.getElementById(b.adPositionName),b.slotWidth=parseInt(window.getComputedStyle(b.adPosObj,null).getPropertyValue("width"))}catch(a){}switch(s=b.adPositionName.split("_")[0]){case"halfpagead":case"rectangle":case"breakad":f=250,_adWidth=300,b.width=_adWidth,e="mr";break;case"superbanner":case"billboard":case"wallpaper":f=90,_adWidth=728,b.width=_adWidth,e="sb",g="";break;case"performance":f=180,_adWidth=620,e="pe";break;case"dmomain":f=95,_adWidth=620,e="dm";break;case"dmomainbottom":f=180,_adWidth=620,e="db";break;case"dmofooter":f=250,_adWidth=620,e="df";break;case"teaser":case"spteaser":case"rectext":f=292,_adWidth=300,b.width=_adWidth<b.slotWidth||b.slotWidth<200?_adWidth:b.slotWidth,e="te",d="margin-top:4px; ";break;default:f=180,_adWidth=620,e="TB"}location.href.indexOf("chefkoch.de")>-1&&("1"===b.adPosition&&"dmomain"===s?"homepage"===GujAd.getClient().getZone()?(f=180,_adWidth=616):"community"===GujAd.getClient().getZone()?(f=250,_adWidth=300,b.width=_adWidth):GujAd.getClient().getKeywords().indexOf("rezeptsuche")>-1?(f=90,_adWidth=610):GujAd.getClient().getKeywords().indexOf("ueberallsuche")>-1?(f=65,_adWidth=620,b.width=_adWidth):"rezepte"===GujAd.getClient().getZone()&&-1===GujAd.getClient().getKeywords().indexOf("ueberallsuche")&&(f=55,_adWidth=580,b.width=_adWidth):"2"===b.adPosition&&"dmomain"===s?GujAd.getClient().getKeywords().indexOf("rezeptsuche")>-1?(f=180,_adWidth=620):"rezepte"===GujAd.getClient().getZone()&&-1===GujAd.getClient().getKeywords().indexOf("ueberallsuche")&&(f=55,_adWidth=600,b.width=_adWidth):"dmofooter"===s&&(f=110,_adWidth=930,b.width=_adWidth)),e+=b.adPosition+"Anzeige"}GujAd.getClient&&GujAd.getClient().getAdPosition(b.adPositionName)&&GujAd.getClient().getAdPosition(b.adPositionName).setAdditional("PROMOAD "+e+b.adPosition+": Ad-Id = "+b.lineItemId+" | Creative-Id= "+b.creativeId+" v3.5.1");var t=null;if("undefined"!=typeof mraid&&GujAd.Util.addStyleToHead({".emsTBContainer":"font-family: Helvetica Neue,Helvetica,Arial,sans-serif; -webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale; color: #000;",".emsTBContainer a":"color: #c00;"},!0),""!==c){t=GujAd.Util.createElement("div",{id:e,className:"emsTBAnzeige emsAnzeige",style:"text-align=:left; z-index:10; font-size: 12px;position:absolute;height:12px;top:2px; right:9px; color:#888; line-height:12px; "+g}),t.innerHTML=c;var u={};u["#"+b.adPositionName+" > .emsAnzeige "]="display: none !important; position: absolute !important; top: -10000px !important;",GujAd.Util.addStyleToHead(u,!0)}b.height=b.height>0?b.height:f;var v=b.width-2,w=document.getElementById("emsTBContainer"+b.idEnding),x=parseInt(window.getComputedStyle(w,null).getPropertyValue("width"));if("undefined"!=typeof GujAd&&null!==w)if(x>0&&b.width<=0)v=x-2;else{for(var y=w.parentNode,z=0;y.offsetWidth<100&&y!==document.body&&z<10;)y=y.parentNode,z++;_adWidth=y.offsetWidth<_adWidth&&y.offsetWidth>0?y.offsetWidth:_adWidth,_adWidth=parent.window.innerWidth>0&&_adWidth<100?parent.window.innerWidth:_adWidth,b.width=b.width>0?b.width:GujAd.getClient().getContentWidth()>0&&GujAd.getClient().getContentWidth()<=parent.window.innerWidth?GujAd.getClient().getContentWidth():_adWidth,v=b.width-2,w.style.width=b.width+"px"}var A=v-20,B=b.height-2,C=B>229?209:B-20,D="left",E="",F="0",G=10,H=0,I="",J="",K="",L="",M="inherit",N="bottom:"+G.toString()+"px;",O="";A/B<1.5?(C=parseInt(B/1.8),C>209*A/400&&(C=209*A/400),D="none",E="text-align:center;",M="17px",I="font-size: 15px;",N="bottom: 5px;",H=5):A/B<2.8?C=parseInt(A/3.8):B<137&&(C=B-10,G=5,M="16px",I="font-size: 14px;",N="bottom:"+G.toString()+"px;"),B<70&&(F="0",M="initial",I="font-size: 12px;"),B<70&&A<500&&(N="top:"+G.toString()+"px;"),B>240&&A>600&&(M="35px",I="font-size: 24px;",N="bottom:"+G.toString()+"px;"),h&&(I="font-size: 16px; font-weight:400;",M="17px",J="font-weight:500;",B<=100?(G=5,A<=280?(I="font-size: 11px; font-weight:400;",M="11px",J="font-weight:500;"):A<=320?(I="font-size: 12px; font-weight:400;",M="12px",J="font-weight:500;"):A<=360&&(I="font-size: 12px; font-weight:400;",M="13px",J="font-weight:500;"),"undefined"!=typeof mraid&&(I="font-size: 11px; font-weight:400;",M="11px",J="font-weight:500;",B>90&&(L="margin-top:10px;",M="12px"))):B<=150&&A/B<2.5&&(G=5,K="padding-bottom:"+(B-C)+"px;",O="left:"+G+"px",A<=320?(I="font-size: 13px; font-weight:400;",M="17px",J="font-weight:500;"):A<=360&&(I="font-size: 14px; font-weight:400;",M="18px",J="font-weight:500;"),"undefined"!=typeof mraid&&(I="font-size: 12px; font-weight:400;",M="14px",J="font-weight:500;")));var P=b.lineItemId+b.creativeId;EmsAd.creative[P]=b,void 0!==b.SkipCC&&"true"===b.SkipCC&&void 0!==b.clickUrl.split(b.clickPrefix)[1]&&(b.clickUrl=b.clickUrl.split(b.clickPrefix)[1],b.clickTrackerArray=b.clickTrackerArray||[],b.clickTrackerArray.push('<img src="'+b.clickPrefix+'" width="0" height="0">'));var Q=GujAd.Util.createElement("div",{id:"emsTBBorder"+b.idEnding,class:"emsTBBorder",style:d+"overflow:hidden; background-color: #fff; border-style:solid; border-width: 1px; border-color:#d6d6d6; margin-right:4px; margin-left:4px;height:"+B+"px; position:relative"}),R=GujAd.Util.createElement("div",{id:"emsTBBox"+b.idEnding,class:"emsTBBox",style:"position: static; margin:"+G+"px; margin-top:"+(G+H)+"px; "+E});Q.appendChild(R);var S=GujAd.Util.createElement("a",{href:b.clickUrl,id:"emsTBBox"+b.idEnding,class:"emsTBBox",target:"_blank",rel:"sponsored",style:K+"position:relative; float:"+D+"; margin-right:"+G+"px; margin-bottom:"+G+"px"});R.appendChild(S);var T=GujAd.Util.createElement("img",{src:b.imgPath,id:"emsTBImg"+b.idEnding,class:"emsTBImg",height:C,style:"display: inline; position: relative; height: "+C+"px !important"});S.appendChild(T);var U=GujAd.Util.createElement("div",{id:"emsTBTitle"+b.idEnding,class:"emsTBTitle",style:"position: static; text-align:left; clear:none; line-height:"+M+"; "+L});R.appendChild(U);var V,W,X=I,Y=I.split("font-size: ");if(void 0!==Y[1]){var Z=parseInt(Y[1].split("px")[0]),$=Y[1].substr(Y[1].indexOf("px"));V=Y[0]+"font-size: "+parseInt(Z-i)+$,W=Y[0]+"font-size: "+parseInt(Z-j)+$,X=Y[0]+"font-size: "+parseInt(Z-k)+$}var _=GujAd.Util.createElement("a",{href:b.clickUrl,id:"emsTBClickText"+b.idEnding,class:"emsTBClickText",target:"_blank",rel:"sponsored",style:J+W+" line-height:"+M+"; font-weight: bold;"});_.innerHTML=b.linktitel,U.appendChild(_);var aa=GujAd.Util.createElement("div",{id:"emsTBText"+b.idEnding,class:"emsTBText",style:"text-align:left; clear:none"});U.appendChild(aa);var ba=GujAd.Util.createElement("p",{id:"emsTBP"+b.idEnding,class:"emsTBP",style:"text-align:left; width:100%; margin: "+F+";"+V+" line-height:"+M});ba.innerHTML=b.beschreibung,aa.appendChild(ba);var ca=GujAd.Util.createElement("div",{id:"emsTBFooter"+b.idEnding,class:"emsTBFooter",style:"position:absolute; clear:none; "+N+" right:"+G+"px; line-height:"+M+";"+O});U.appendChild(ca);var da=GujAd.Util.createElement("a",{href:b.clickUrl,id:"emsTBClickFooter"+b.idEnding,class:"emsTBClickFooter",target:"_blank",rel:"sponsored",style:X+" line-height:"+M+'; font-weight: bold;" target="_blank'});if(da.innerHTML=b.footer,ca.appendChild(da),"undefined"!=typeof GujAd&&void 0!==w){if(location.hostname.indexOf("spiegel")>-1){var ea=parent.document.getElementById("emsTBContainer"+b.idEnding).parentElement.parentElement;if(null!==ea){var fa=GujAd.Util.createElement("style",{id:"emsStyle_"+b.idEnding,innerHTML:"#"+ea.id+" .emsInner, #"+ea.id+" .emsAnzeige { display:none !important; }"});ea.insertBefore(fa,ea.firstChild)}}GujAd.Util.prepend(w,Q),GujAd.Util.prepend(Q,GujAd.Util.createElement("div",{id:"emsTBClick"+b.idEnding,style:"position:absolute;height:100%;width:100%;top:0px;left:0px;z-index:auto;"}));var ga=document.getElementById("emsTBClick"+b.idEnding);ga.style.cursor="pointer",ga.addEventListener("click",function(){if(void 0!==b.clickTrackerArray)for(var a=0;a<b.clickTrackerArray.length&&a<4;a++)q(b.clickTrackerArray[a]);window.open(b.clickUrl,"Werbung","").focus()}),R.addEventListener("click",function(){if(void 0!==b.clickTrackerArray)for(var a=0;a<b.clickTrackerArray.length&&a<4;a++)q(b.clickTrackerArray[a])}),null!==t&&GujAd.Util.prepend(w,t)}var ha={message:"PromotionAdFinished",adPositionName:b.adPositionName,width:w.getBoundingClientRect().width,height:w.getBoundingClientRect().height};top.window.postMessage(ha,"*"),q(b.impTrackerBottom)}};