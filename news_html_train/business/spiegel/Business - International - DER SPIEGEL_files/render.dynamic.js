GujAd.Render.element.dynamicAd=function(e){var t=GujAd.Render.updatePositionValues(e),i=parseInt(window.getComputedStyle(t.slotElement,null).getPropertyValue("margin-left"));i=i||0;var d={};if(["sidebarad","dynamic-billboard","dynamic-sidekick"].indexOf(e.adFormat)>-1){var n=location.host.indexOf("spiegel")>-1||location.host.indexOf("bento")>-1||location.host.indexOf("harvardbusinessmanager")>-1||location.host.indexOf("manager-magazin")>-1||location.host.indexOf("planestream")>-1;if(["sidebarad","dynamic-sidekick"].indexOf(e.adFormat)>-1){var o=!1,a=0,s=0;d["#"+e.adPosition]="margin-left: "+parseInt(i-t.slotPos.left+t.mmPos.left)+"px  !important; top: "+parseInt(t.mmTop-t.bodyPos.top)+"px !important; position:fixed !important",d.body="margin-right: 0; margin-left: 0";var l=function(){if(null!==(t=GujAd.Render.updatePositionValues(e)).iframeAdSlot){if(t.iframeAdSlot.style.transition="none",document.body.style.transition="none",o&&!n&&e.mmLeftExpanded>=t.mmPos.left){var i=parseInt((a-window.innerWidth)/2+s);i=i>0?0:i,document.body.style.marginLeft=i+"px",t=GujAd.Render.updatePositionValues(e)}var d=t.bodyWidth-t.slotPos.left,l=window.innerHeight-t.mmTop+t.bodyPos.top;t.iframeAdSlot.style.width=parseInt(d>e.adWidth?d:e.adWidth)+"px",t.iframeAdSlot.style.height=parseInt(l>e.adHeight?l:e.adHeight)+"px"}}.bind(this);if(setTimeout(l,0),["dynamic-sidekick"].indexOf(e.adFormat)>-1){d["body.emsSkyExpanded"]="width: 100% !important";var r=GujAd.Util.createElement("img",{id:"skyExpandImg",src:"//static.emsservice.de/icons/symbol_open.png",style:"margin-top: 5px; position:absolute; right: 10px; width: 15px; height: 15px; z-index: 60"}),p=GujAd.Util.createElement("div",{id:"skyExpandText",style:"margin-top: 5px; position:absolute; right: 32px; color: #fff; font-family: Helvetica; line-height:17px; font-size: 12px; z-index:50"});p.innerHTML="Öffnen";var m=GujAd.Util.createElement("div",{id:"skyExpandBG",style:"position:absolute; right: 0; top: 0; z-index:40; width: 75px; height: 25px; background-color: #000; opacity: 0.1"}),h=GujAd.Util.createElement("div",{id:"skyExpand",style:"display:none; cursor:pointer; position:absolute; right: 0; top: 0; z-index:40; width: 75px; height: 25px"});h.onclick=function(){g()},h.appendChild(r),h.appendChild(p),h.appendChild(m),e.container.appendChild(h);var c=GujAd.Util.createElement("img",{id:"skyCollapseImg",src:"//static.emsservice.de/icons/symbol_close.png",style:"margin-top: 5px; position:absolute; right: 10px; width: 15px; height: 15px; z-index: 60"}),y=GujAd.Util.createElement("div",{id:"skyCollapseText",style:"margin-top: 5px; position:absolute; right: 32px; color: #fff; font-family: Helvetica; line-height:17px; font-size: 12px; z-index:50"});y.innerHTML="Schließen";var f=GujAd.Util.createElement("div",{id:"skyCollapseBG",style:"position:absolute; right: 0; top: 0; z-index:40; width: 90px; height: 25px; background-color: #000; opacity: 0.1"}),u=GujAd.Util.createElement("div",{id:"skyCollapse",style:"display:none; cursor:pointer; position:absolute; right: 0; top: 0; z-index:40; width: 90px; height: 25px"});u.onclick=function(){x()},u.appendChild(c),u.appendChild(y),u.appendChild(f),e.container.appendChild(u);var g=function(){if(l(),t.mmPos.left+parseInt(e.adWidth-20)<window.innerWidth){GujAd.Storage.saveElement("gujsitekick",GujAd.Storage.TYPE_COOKIE,"1",86400),GujAd.Util.addClassName(document.body,"emsSkyExpanded"),window.postMessage("Sidekick_Expand","*"),t.iframeAdSlot.contentWindow.postMessage("open_ad","*"),s=parseInt(-t.mmPos.left+GujAd.getClient().getContentWidth()),s=(s=t.bodyWidth-t.slotPos.left-s>2e3?t.bodyWidth-t.slotPos.left-2e3:s)>0?0:s,a=window.innerWidth,document.body.style.transition="margin-left 1s ease",document.body.style.marginLeft=s+"px";var i=t.bodyWidth-t.slotPos.left;t.iframeAdSlot.style.transition="width 1s ease",t.iframeAdSlot.style.width=parseInt(i>e.adWidth?i:e.adWidth)-s+"px",o=!0,u.style.display="block",h.style.display="none",setTimeout(function(){l(),e.mmLeftExpanded=t.mmPos.left}.bind(this),1e3)}else h.style.display="block"}.bind(this),x=function(){window.postMessage("Sidekick_Collapse","*"),t.iframeAdSlot.contentWindow.postMessage("close_ad","*"),l();var i=t.bodyWidth-t.slotPos.left+s;t.iframeAdSlot.style.transition="width 1s ease",t.iframeAdSlot.style.width=parseInt(i>e.adWidth?i:e.adWidth)+"px",document.body.style.transition="margin-left 1s ease",document.body.style.marginLeft="",s=0,a=0,o=!1,h.style.display="block",u.style.display="none",setTimeout(l,1e3),setTimeout(function(){GujAd.Util.removeClassName(document.body,"emsSkyExpanded")},1e3)}.bind(this);null===GujAd.Storage.loadElement("gujsitekick",GujAd.Storage.TYPE_COOKIE)?setTimeout(g,3e3):h.style.display="block"}window.addEventListener("resize",handleOnResizeSitebar=function(){l()}.bind(this)),GujAd.registerBeforeAdreloadHandler(function(){window.removeEventListener("resize",handleOnResizeSitebar)})}else if("dynamic-billboard"===e.adFormat){var b=GujAd.Util.createElement("img",{id:"bb_blocker",src:("https:"!==location.protocol?"http:":"https:")+"//static.emsservice.de/systempixel/platzhalter.gif",width:1,style:"height: "+e.adHeight+"px;",height:e.adHeight,border:0});t.slotElement.appendChild(b),d["#"+e.adPosition+" div[id*=google_ads_iframe]"]="position: absolute;",n&&(d["#emsAnzeige_mitte_1"]=" width: 100% !important; max-width: 100% !important; margin-left: 145px !important;");var A=function(){if(null!==(t=GujAd.Render.updatePositionValues(e)).iframeAdSlot){var i=t.bodyWidth>2e3?2e3:t.bodyWidth;t.iframeAdSlot.style.width=parseInt(i>e.adWidth?i:e.adWidth)+"px",2e3===i&&i>e.adWidth?t.iframeAdSlot.style.margin="auto "+parseInt((t.bodyWidth-2e3)/2)+"px":t.iframeAdSlot.style.margin="auto",t.slotElement.querySelector("#"+e.adPosition+" div[id*=google_ads_iframe]").style.marginLeft=-t.slotPos.left+"px"}}.bind(this);setTimeout(A,0),window.addEventListener("resize",handleOnResizeDynamicBB=function(){A()}.bind(this)),GujAd.registerBeforeAdreloadHandler(function(){window.removeEventListener("resize",handleOnResizeDynamicBB),GujAd.Util.removeElement("#bb_blocker")})}var v="skyscraper_1"===e.adPosition?"emsAdResponsiveStyle":"emsRenderDynamic_"+e.adPosition;GujAd.Util.removeElement("#"+v),GujAd.Util.addStyleToHead(d,!0,v)}};